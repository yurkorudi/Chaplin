<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chaplin cinema</title>
  <link rel="stylesheet" href="/static/css/globals.css">
  <link rel="stylesheet" href="/static/css/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body class="fade-in">
  <div class="home">
    {% include('header.html') %}
      
      
  <main class="main homePage">
     <div class="session-row">
      <div class="sessions">
        <h1 > –ù–∞–π–±–ª–∏–∂—á—ñ —Å–µ–∞–Ω—Å–∏</h1>
        <div class="nearest">
          {% for movie, s in nearest %}
            <div id="slide" class="slide">
                <a href="{{ url_for('movie', movie_name=movie.name) }}">
                <div class="visual_slide">
                  <img src="{{ movie.img_src }}" alt="">
                    <div class="slider-film-back">
                      <div class="slider-film-button">
                        <button>‚Ñπ</button>
                        <p>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ñ—ñ–ª—å–º</p>
                        <button>‚ñ∂</button>
                        <p>–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç —Ç—Ä–µ–π–ª–µ—Ä</p>
                      </div>
                      <div class="slider-film-info">
                        <p>–ù–∞–∑–≤–∞: {{ movie.name }}</p>
                        <p>–ñ–∞–Ω—Ä: {{ movie.genre }}</p>
                        <p>–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: {{ movie.duration }}</p>
                        <p>–í—ñ–∫: {{ movie.age }}</p>
                      </div>
                    </div>
                    <div class="inf">
                      <div class="time">{{ s.session_datetime.strftime("%H:%M") }}</div>
                      <div class="d">2D</div>
                      <div class="age">{{ movie.age }}</div>
                    </div>
                </div>
                {% if mobile %}
                <div class="short_data">
                  <p id="movie_tittle">{{ movie.name }}</p>
                  <p id="movie_gange">{{ movie.genre }}</p>
              </div>
              {% endif %}
              </a>
                
          </div>
          <!-- <button class="book_button">üé´ Time</button> -->
          {% endfor %}
        </div>
        <!-- <div class="weekly">
          <p>üóìÔ∏è –ü—Ä–µ–º'—î—Ä–∏ —Ç–∏–∂–Ω—è</p>

          <a href="">üé¨ Test</a>
        </div> -->
      </div>
    </div>
    
    <h1>–ü—Ä–µ–º'—î—Ä–∏ —Ç–∏–∂–Ω—è</h1>

    
    
    <!-- Home page's base 360 degris's slider -->
      <div class="slideshow">
        <div class="slides-viewport">
        <div class="slide-track">
              {% for movie in movies[-6:] %}
              <div id="slide" class="slide">
                <a href="{{ url_for('movie', movie_name=movie.name) }}">
                <div class="visual_slide">
                  <img src="{{ movie.img_src }}" alt="">
                    <div class="slider-film-back">
                      <div class="slider-film-button">
                        <button>‚Ñπ</button>
                        <p>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ñ—ñ–ª—å–º</p>
                        <button>‚ñ∂</button>
                        <p>–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç —Ç—Ä–µ–π–ª–µ—Ä</p>
                      </div>
                      <div class="slider-film-info">
                        <p>–ù–∞–∑–≤–∞: {{ movie.name }}</p>
                        <p>–ñ–∞–Ω—Ä: {{ movie.genre }}</p>
                        <p>–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: {{ movie.duration }}</p>
                        <p>–í—ñ–∫: {{ movie.age }}</p>
                      </div>
                    </div>
                    <div class="inf">
                      <div class="d">2D</div>
                      <div class="age">{{ movie.age }}</div>
                    </div>
                </div>
                {% if mobile %}
                <div class="short_data">
                  <p id="movie_tittle">{{ movie.name }}</p>
                  <p id="movie_gange">{{ movie.genre }}</p>
              </div>
              {% endif %}
              </a>
                
              </div>
              
            {% endfor %}
          </div>
          </div>
          <div class="slid-buttons">
            <button id="prev"><</button>
            <button id="next">></button>
        </div>
        </div>
      

    <!-- end home page's base 360 degris's slider -->
    
  </main>
  {% include('sticky_menu.html') %}

  {% include('footer.html') %}
{% if not mobile %}
</div>
  <script>
    // ===========================slideshow================================
        const viewport = document.querySelector('.slides-viewport');
        const track = document.querySelector('.slide-track');
        let slides = Array.from(track.children);

        const slideWidth = slides[0].offsetWidth;
        const viewportWidth = viewport.offsetWidth;

        // how many slides are needed to fill screen
        const slidesNeeded = Math.ceil(viewportWidth / slideWidth);

        // clone slides until we have enough
        while (slides.length < slidesNeeded * 2) {
          slides.forEach(slide => {
            const clone = slide.cloneNode(true);
            track.appendChild(clone);
          });
          slides = Array.from(track.children);
        }

        document.getElementById('next').addEventListener('click', () => {
        track.style.transition = 'transform 0.5s ease';
        track.style.transform = `translateX(${-slideWidth}px)`;

        // –ø—ñ—Å–ª—è –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –∞–Ω—ñ–º–∞—Ü—ñ—ó –ø–µ—Ä–µ–º—ñ—â–∞—î–º–æ –ø–µ—Ä—à–∏–π —Å–ª–∞–π–¥ –≤ –∫—ñ–Ω–µ—Ü—å
        setTimeout(() => {
            track.style.transition = 'none';
            track.appendChild(track.firstElementChild);
            track.style.transform = 'translateX(0)';
        }, 500);
        });

        document.getElementById('prev').addEventListener('click', () => {
        // –ø–µ—Ä–µ–º—ñ—â–∞—î–º–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Å–ª–∞–π–¥ –≤ –ø–æ—á–∞—Ç–æ–∫ –ø–µ—Ä–µ–¥ –∞–Ω—ñ–º–∞—Ü—ñ—î—é
        track.insertBefore(track.lastElementChild, track.firstElementChild);
        track.style.transition = 'none';
        track.style.transform = `translateX(${-slideWidth}px)`;

        setTimeout(() => {
            track.style.transition = 'transform 0.5s ease';
            track.style.transform = 'translateX(0)';
        }, 20);
        });
  </script>
{% endif %}
</body>

</html>