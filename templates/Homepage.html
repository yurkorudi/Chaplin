<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chaplin cinema</title>
  <link rel="stylesheet" href="/static/css/globals.css">
  <link rel="stylesheet" href="/static/css/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body class="fade-in">
  <div class="home">
    {% include('header.html') %}
      
      
  <main class="main homePage">
     <div class="session-row">
      <div class="sessions">
        <p>üïí –ù–∞–π–±–ª–∏–∂—á—ñ —Å–µ–∞–Ω—Å–∏</p>
        <div class="nearest">
          {% for movie in movies[-2:] %}
          <div class="mst_sesion">
            <a href="">
              <p>üé¨ {{ movie.name }}</p>
              <p>üé´ </p>
            </a>
          </div>
          <!-- <button class="book_button">üé´ Time</button> -->
          {% endfor %}
        </div>
        <!-- <div class="weekly">
          <p>üóìÔ∏è –ü—Ä–µ–º'—î—Ä–∏ —Ç–∏–∂–Ω—è</p>

          <a href="">üé¨ Test</a>
        </div> -->
      </div>
    </div>
    
    <h1>–ü—Ä–µ–º'—î—Ä–∏ —Ç–∏–∂–Ω—è</h1>

    {% if mobile %}
      {% for movie in movies %}
        <div class="film-session">
          <div class="film-item">
            <div class="film-inf">
              <h1 style="font-size: 20px;">{{ movie.name }}</h1>
              <p>{{ movie.age }}</p>
              <p>{{ movie.genre }}</p>
              <!-- <p>{{ movie.description }}</p> -->
              <button class="button">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏</button>
            </div>
            <img src="{{ movie.img_src }}" alt="{{ movie.title }}">
          </div>
        </div>
      {% endfor %}
    {% else %}
    
    <!-- Home page's base 360 degris's slider -->

    <section class="slider row">
      <!-- <div class="slider-body">
        {% for movie in movies[-8:] %}
        <div id="slideshow-form" class="slider-item" style="--j--:{{ loop.index }}">
          <input type="image" , src="{{ movie.img_src }}" width="250" height="350">
          <a href="{{ url_for('movie', movie_name='{{ movie.title }}')}}">
            <div class="slider-film-back">
              <div class="slider-film-button">
                  <button>info</button>
                <button>trailer</button>
              </div>
              <div class="slider-film-info">
                <p>–ù–∞–∑–≤–∞: {{ movie.name }}</p>
                <p>–ñ–∞–Ω—Ä: {{ movie.genre }}</p>
                <p>–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: {{ movie.duration }}</p>
                <p>–í—ñ–∫: {{ movie.age }}</p>
              </div>
            </div>
            <div class="inf">
              <div class="d">2D</div>
              <div class="age">{{ movie.age }}</div>
            </div>
          </a>
          
        </div>
      {% endfor %}

        
      </div>
      <div class="button-wrapper">
        <button class="prev"> < </button>
            <button class="next">></button>
      </div> -->

      <div class="slideshow">
            <div class="slide-track">
              {% for movie in movies[-8:] %}
              <div id="slide" class="slide">
                <input type="image" , src="{{ movie.img_src }}" width="250" height="350">
                <a href="{{ url_for('movie', movie_name='{{ movie.title }}')}}">
                  <div class="slider-film-back">
                    <div class="slider-film-button">
                        <button>info</button>
                      <button>trailer</button>
                    </div>
                    <div class="slider-film-info">
                      <p>–ù–∞–∑–≤–∞: {{ movie.name }}</p>
                      <p>–ñ–∞–Ω—Ä: {{ movie.genre }}</p>
                      <p>–¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å: {{ movie.duration }}</p>
                      <p>–í—ñ–∫: {{ movie.age }}</p>
                    </div>
                  </div>
                  <div class="inf">
                    <div class="d">2D</div>
                    <div class="age">{{ movie.age }}</div>
                  </div>
                </a>
                
              </div>
            {% endfor %}
            </div>
        </div>
        <div class="slid-buttons">
            <button id="prev"><</button>
            <button id="next">></button>
        </div>
    </section>

    <!-- end home page's base 360 degris's slider -->
    {% endif %}
  </main>

  {% include('footer.html') %}

  <script>
    
        // ===========================slideshow================================
        const track = document.querySelector('.slide-track');
        const slides = document.querySelectorAll('.slide');
        const slideWidth = 300 + 7; // —à–∏—Ä–∏–Ω–∞ + –≤—ñ–¥—Å—Ç—É–ø
        const slideCount = slides.length;

        document.getElementById('next').addEventListener('click', () => {
        track.style.transition = 'transform 0.5s ease';
        track.style.transform = `translateX(${-slideWidth}px)`;

        // –ø—ñ—Å–ª—è –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –∞–Ω—ñ–º–∞—Ü—ñ—ó –ø–µ—Ä–µ–º—ñ—â–∞—î–º–æ –ø–µ—Ä—à–∏–π —Å–ª–∞–π–¥ –≤ –∫—ñ–Ω–µ—Ü—å
        setTimeout(() => {
            track.style.transition = 'none';
            track.appendChild(track.firstElementChild);
            track.style.transform = 'translateX(0)';
        }, 500);
        });

        document.getElementById('prev').addEventListener('click', () => {
        // –ø–µ—Ä–µ–º—ñ—â–∞—î–º–æ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Å–ª–∞–π–¥ –≤ –ø–æ—á–∞—Ç–æ–∫ –ø–µ—Ä–µ–¥ –∞–Ω—ñ–º–∞—Ü—ñ—î—é
        track.insertBefore(track.lastElementChild, track.firstElementChild);
        track.style.transition = 'none';
        track.style.transform = `translateX(${-slideWidth}px)`;

        setTimeout(() => {
            track.style.transition = 'transform 0.5s ease';
            track.style.transform = 'translateX(0)';
        }, 20);
        });

  </script>

</body>

</html>